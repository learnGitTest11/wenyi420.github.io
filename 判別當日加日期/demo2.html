<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>測試日期ok 要測是月份</title>
	<script src="jquery-min.js"></script>
</head>
<body>

	<form action="">
		<label for="today">入住日期</label>
		<input id="today" type="date" value="" placeholder="請輸入日期">
		<br>
		<br>
		<br>
		<label for="lastday">退房日期</label>
		<input id="lastday" type="date" value="" placeholder="產生隔日">


	</form>
	

	

	<script>
		$(function(){

				var getToday = document.querySelector("#today");
				var getLastDay = document.querySelector("#lastday");

				getToday.addEventListener("input",function(){
						if( $(this).value !== ""){

							//抓取 當日值
							var dayValue = getToday.value;
							// 將 2019-01-01 的日 抓出 
							var getDay = dayValue.slice(8,10);
							// 抓取 當日的年月 2019-01-
							var lastdays = dayValue.slice(0,8);
							// 抓取 當日的年 2019-
							var getYear = dayValue.slice(0,5);

							// 抓取當月值
							var getMonth = dayValue.slice(5,7);
							console.log(typeof getMonth);

							var isChangeMonth = function(){
								// 判斷大月 或 小月  
								//假如大月判斷當日是否31 如果是 那月要 +1  日期改01
								//假如小月判斷當日是否30 如果是 那月要 +1  日期改01

								//判斷是否大月
								if(getMonth == 01 || getMonth == 03 || getMonth == 05 || getMonth == 07 || getMonth == 08 || getMonth == 10 || getMonth == 12 ){
									console.log("yes this is big");
									// 確定是大月後判斷當日是否31號 
									if(getDay == 31){
										// 直接替換成 1號
										getDay = "01";
										// 當月 +1
										getMonth= Number(getMonth)
								 		getMonth += 1 ;
								 		getMonth = String(getMonth);
								 		var adZeroMonth = "0" + getMonth;

								 		//加到隔日
								 		getLastDay.value =  getYear + adZeroMonth+ "-" +getDay ;
									}else{
										addOneToLastDay();
									}
								// 小月
								}else{
									if(getDay == 30){
										getDay = "01";
										// 當月 +1
										getMonth= Number(getMonth)
								 		getMonth += 1 ;
								 		getMonth = String(getMonth);
								 		var adZeroMonth = "0" + getMonth;

								 		//加到隔日
								 		getLastDay.value =  getYear + adZeroMonth+ "-" +getDay ;
									}else{
										addOneToLastDay();
									}
								}

							}
							

							var addOneToLastDay = function(){

								
								getDay= Number(getDay)
							 	getDay += 1 ;
							 	getDay = String(getDay);
								// 判斷是否 小於等於9 則需加 0 在前 才不會 2019-01-1
								 if(getDay<=9){
								 	// 抓出後轉成 數字 去 +1 
								 	
								 	console.log(1)
								 	var adZeroDay = "0" + getDay;
								 }else{
								 	// 10號以上 查看是否月底要換月

								 	console.log(3);
								 	// isChangeMonth();
								 	
								 }
								 
								 // 當日的日期 小於10 
								 if (getDay<=9) {
								 // 將 有加 0 的 變數 帶入
								 // 2019-01-  +  "01~09"
								 	lastdays += adZeroDay;
								 // 將組成的 2019-01-01 帶入 getLastDay的值
								 	getLastDay.value =  lastdays;
								 // 大於等於 10 就直接加沒處理 +0字串的值
								 }else{
								 	console.log(2);
								 	// isChangeMonth();
								 	
								 	lastdays += getDay;
								 	getLastDay.value =  lastdays;
								 }
							}

							isChangeMonth();
							
							
				
							
						}
				});
			

			
		})
	</script>
</body>
</html>