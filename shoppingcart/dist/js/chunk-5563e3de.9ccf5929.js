(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5563e3de"],{1897:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",{staticClass:"pageTitle"},[t._v("編輯訂單")]),a("div",{staticClass:"editList"},[a("b-container",{attrs:{fluid:""}},[a("b-row",{staticClass:"my-3"},[a("b-col",{staticClass:"inputLabel",attrs:{sm:"2",lg:"1"}},[a("label",[t._v("姓名")])]),a("b-col",{attrs:{sm:"6"}},[a("b-form-input",{attrs:{id:"name",value:t.orderData.name}})],1)],1),a("b-row",{staticClass:"my-3"},[a("b-col",{staticClass:"inputLabel",attrs:{sm:"2",lg:"1"}},[a("label",[t._v("電話")])]),a("b-col",{attrs:{sm:"6"}},[a("b-form-input",{attrs:{id:"phone",value:t.orderData.phone}})],1)],1),a("b-row",{staticClass:"my-3"},[a("b-col",{staticClass:"inputLabel",attrs:{sm:"2",lg:"1"}},[a("label",[t._v("信箱")])]),a("b-col",{attrs:{sm:"6"}},[a("b-form-input",{attrs:{id:"email",value:t.orderData.email}})],1)],1),a("b-row",{staticClass:"my-3"},[a("b-col",{staticClass:"inputLabel",attrs:{sm:"2",lg:"1"}},[a("label",[t._v("狀態")])]),a("b-col",{staticClass:"radio-content",attrs:{sm:"6"}},[a("b-form-radio",{staticClass:"radio-item",attrs:{name:"some-radios",value:!0},model:{value:t.orderData.isPay,callback:function(e){t.$set(t.orderData,"isPay",e)},expression:"orderData.isPay"}},[t._v("已付款")]),a("b-form-radio",{staticClass:"radio-item",attrs:{name:"some-radios",value:!1},model:{value:t.orderData.isPay,callback:function(e){t.$set(t.orderData,"isPay",e)},expression:"orderData.isPay"}},[t._v("未付款")])],1)],1)],1),a("div",{staticClass:"cart-list"},t._l(t.orderMovieList,(function(e,r){return a("editOrderMovies",{key:e.id,attrs:{item:e,index:r},on:{DELETE_MOVIE:t.deleteHanlder,CHANGE_AMOUNT:t.changeAmountHandler}})})),1),a("div",{staticClass:"btn-list"},[a("b-button",{staticClass:"btn",attrs:{variant:"secondary"},on:{click:t.goToBack}},[t._v("返回")]),a("b-button",{staticClass:"btn",attrs:{variant:"success"},on:{click:t.editUpdate}},[t._v("送出")])],1)],1)])},i=[],s=(a("d81d"),a("13d5"),a("a434"),a("b0c0"),a("e7e5"),a("d399")),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item"},[a("div",{staticClass:"photo item-left"},[t.item.movieImg?a("img",{attrs:{src:"https://image.tmdb.org/t/p/w500/"+t.item.movieImg,alt:""}}):a("img",{attrs:{alt:"找不到該圖片",src:"https://images.pexels.com/photos/33129/popcorn-movie-party-entertainment.jpg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"}})]),a("div",{staticClass:"item-right"},[a("p",{staticClass:"title"},[t._v(t._s(t.item.name))]),a("p",{staticClass:"quantity"},[a("span",{staticClass:"quantity-btn decrease",on:{click:t.changeAmount}},[t._v("-")]),a("input",{attrs:{type:"text",disabled:""},domProps:{value:t.item.Quantity}}),a("span",{staticClass:"quantity-btn increase",on:{click:t.changeAmount}},[t._v("+")])]),a("p",{staticClass:"price"},[t._v("$ "+t._s(t.item.price*t.item.Quantity))]),a("van-icon",{staticClass:"\n      delete",attrs:{name:"clear"},on:{click:t.deleteCartItem}})],1)])},o=[],c=(a("a9e3"),{name:"editOrderMovie",props:{item:{type:Object,required:!0},index:{type:Number,require:!0}},methods:{changeAmount:function(t){var e=this.item;if(t.target.classList.contains("decrease")){if(1===e.Quantity)return;e.Quantity--}t.target.classList.contains("increase")&&e.Quantity++;var a=e.Quantity*e.price;this.$emit("CHANGE_AMOUNT",{index:this.index,Quantity:e.Quantity,totalPrice:a})},deleteCartItem:function(){console.log("index",this.index),this.$emit("DELETE_MOVIE",this.index)}}}),l=c,u=(a("2f17"),a("2877")),d=Object(u["a"])(l,n,o,!1,null,null,null),m=d.exports,p={name:"editOrder",data:function(){return{orderData:{},orderMovieList:[]}},components:{editOrderMovies:m},created:function(){var t=this;this.$axios.get("https://vueshopcart.herokuapp.com/orderlist/".concat(this.$route.params.orderID)).then((function(e){console.log("已取得",e),t.orderData=e.data,t.orderMovieList=e.data.movie})).catcg((function(t){console.log(t)}))},methods:{deleteHanlder:function(t){this.orderMovieList.splice(t,1)},changeAmountHandler:function(t){console.log("emit obj =",t);var e=this.orderMovieList[t.index];e.Quantity=t.Quantity,e.totalPrice=t.totalPrice},editUpdate:function(){var t=this,e=document.querySelector("#name").value,a=document.querySelector("#email").value,r=document.querySelector("#phone").value;this.orderData.name=e,this.orderData.email=a,this.orderData.phone=r;var i=this.$axios.create({});i.interceptors.request.use((function(t){return s["a"].loading({mask:!1,duration:0,forbidClick:!0,message:"加載中..."}),t}),(function(t){s["a"].clear(),Object(s["a"])("請求錯誤, 請稍後重試"),console.log(t)})),i.interceptors.response.use((function(t){return s["a"].loading({mask:!1,duration:1,forbidClick:!0,message:"修改成功"}),t}),(function(t){s["a"].clear(),Object(s["a"])("請求錯誤, 請稍後重試"),console.log(t)})),i.patch("https://vueshopcart.herokuapp.com/orderlist/".concat(this.$route.params.orderID),this.orderData).then((function(e){console.log(e),t.$router.push("/admin/orderList")})).catcg((function(t){console.log(t)}))},goToBack:function(){this.$router.push("/admin/orderList")}},computed:{getTotalPrice:function(){return this.orderMovieList.map((function(t){return t.totalPrice})).reduce((function(t,e){return t+e}),0)}},watch:{getTotalPrice:function(){console.log("totalpirce已改變"),this.orderData.totalPrice=this.getTotalPrice}}},f=p,v=(a("2b9f"),Object(u["a"])(f,r,i,!1,null,"44dd3e51",null));e["default"]=v.exports},2019:function(t,e,a){},"2b9f":function(t,e,a){"use strict";var r=a("317f"),i=a.n(r);i.a},"2f17":function(t,e,a){"use strict";var r=a("2019"),i=a.n(r);i.a},"317f":function(t,e,a){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var r=a("1d80"),i=a("5899"),s="["+i+"]",n=RegExp("^"+s+s+"*"),o=RegExp(s+s+"*$"),c=function(t){return function(e){var a=String(r(e));return 1&t&&(a=a.replace(n,"")),2&t&&(a=a.replace(o,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,a){var r=a("861d"),i=a("d2bb");t.exports=function(t,e,a){var s,n;return i&&"function"==typeof(s=e.constructor)&&s!==a&&r(n=s.prototype)&&n!==a.prototype&&i(t,n),t}},a9e3:function(t,e,a){"use strict";var r=a("83ab"),i=a("da84"),s=a("94ca"),n=a("6eeb"),o=a("5135"),c=a("c6b6"),l=a("7156"),u=a("c04e"),d=a("d039"),m=a("7c73"),p=a("241c").f,f=a("06cf").f,v=a("9bf2").f,h=a("58a8").trim,b="Number",g=i[b],y=g.prototype,C=c(m(y))==b,_=function(t){var e,a,r,i,s,n,o,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=h(l),e=l.charCodeAt(0),43===e||45===e){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(s=l.slice(2),n=s.length,o=0;o<n;o++)if(c=s.charCodeAt(o),c<48||c>i)return NaN;return parseInt(s,r)}return+l};if(s(b,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var I,E=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof E&&(C?d((function(){y.valueOf.call(a)})):c(a)!=b)?l(new g(_(e)),a,E):_(e)},N=r?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;N.length>x;x++)o(g,I=N[x])&&!o(E,I)&&v(E,I,f(g,I));E.prototype=y,y.constructor=E,n(i,b,E)}},d81d:function(t,e,a){"use strict";var r=a("23e7"),i=a("b727").map,s=a("1dde"),n=a("ae40"),o=s("map"),c=n("map");r({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-5563e3de.9ccf5929.js.map