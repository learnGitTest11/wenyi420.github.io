(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-526df199"],{1897:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",{staticClass:"pageTitle"},[t._v("編輯訂單")]),a("div",{staticClass:"editList"},[a("b-container",{attrs:{fluid:""}},[a("b-row",{staticClass:"my-3"},[a("b-col",{staticClass:"inputLabel",attrs:{sm:"2",lg:"1"}},[a("label",[t._v("姓名")])]),a("b-col",{attrs:{sm:"6"}},[a("b-form-input",{attrs:{id:"name",value:t.orderData.name}})],1)],1),a("b-row",{staticClass:"my-3"},[a("b-col",{staticClass:"inputLabel",attrs:{sm:"2",lg:"1"}},[a("label",[t._v("電話")])]),a("b-col",{attrs:{sm:"6"}},[a("b-form-input",{attrs:{id:"phone",value:t.orderData.phone}})],1)],1),a("b-row",{staticClass:"my-3"},[a("b-col",{staticClass:"inputLabel",attrs:{sm:"2",lg:"1"}},[a("label",[t._v("信箱")])]),a("b-col",{attrs:{sm:"6"}},[a("b-form-input",{attrs:{id:"email",value:t.orderData.email}})],1)],1),a("b-row",{staticClass:"my-3"},[a("b-col",{staticClass:"inputLabel",attrs:{sm:"2",lg:"1"}},[a("label",[t._v("狀態")])]),a("b-col",{staticClass:"radio-content",attrs:{sm:"6"}},[a("b-form-radio",{staticClass:"radio-item",attrs:{name:"some-radios",value:!0},model:{value:t.orderData.isPay,callback:function(e){t.$set(t.orderData,"isPay",e)},expression:"orderData.isPay"}},[t._v("已付款")]),a("b-form-radio",{staticClass:"radio-item",attrs:{name:"some-radios",value:!1},model:{value:t.orderData.isPay,callback:function(e){t.$set(t.orderData,"isPay",e)},expression:"orderData.isPay"}},[t._v("未付款")])],1)],1)],1),a("div",{staticClass:"cart-list"},t._l(t.orderMovieList,(function(e,i){return a("editOrderMovies",{key:e.id,attrs:{item:e,index:i},on:{DELETE_MOVIE:t.deleteHanlder,CHANGE_AMOUNT:t.changeAmountHandler}})})),1),a("div",{staticClass:"btn-list"},[a("b-button",{staticClass:"btn",attrs:{variant:"secondary"},on:{click:t.goToBack}},[t._v("返回")]),a("b-button",{staticClass:"btn",attrs:{variant:"success"},on:{click:t.editUpdate}},[t._v("送出")])],1)],1)])},r=[],s=(a("d81d"),a("13d5"),a("a434"),a("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item"},[a("div",{staticClass:"photo item-left"},[t.item.movieImg?a("img",{attrs:{src:"https://image.tmdb.org/t/p/w500/"+t.item.movieImg,alt:""}}):a("img",{attrs:{alt:"找不到該圖片",src:"https://images.pexels.com/photos/33129/popcorn-movie-party-entertainment.jpg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"}})]),a("div",{staticClass:"item-right"},[a("p",{staticClass:"title"},[t._v(t._s(t.item.name))]),a("p",{staticClass:"quantity"},[a("span",{staticClass:"quantity-btn decrease",on:{click:t.changeAmount}},[t._v("-")]),a("input",{attrs:{type:"text",disabled:""},domProps:{value:t.item.Quantity}}),a("span",{staticClass:"quantity-btn increase",on:{click:t.changeAmount}},[t._v("+")])]),a("p",{staticClass:"price"},[t._v("$ "+t._s(t.item.price*t.item.Quantity))]),a("van-icon",{staticClass:"\n      delete",attrs:{name:"clear"},on:{click:t.deleteCartItem}})],1)])}),o=[],n=(a("a9e3"),{name:"editOrderMovie",props:{item:{type:Object,required:!0},index:{type:Number,require:!0}},methods:{changeAmount:function(t){var e=this.item;if(t.target.classList.contains("decrease")){if(1===e.Quantity)return;e.Quantity--}t.target.classList.contains("increase")&&e.Quantity++;var a=e.Quantity*e.price;this.$emit("CHANGE_AMOUNT",{index:this.index,Quantity:e.Quantity,totalPrice:a})},deleteCartItem:function(){console.log("index",this.index),this.$emit("DELETE_MOVIE",this.index)}}}),c=n,l=(a("2f17"),a("2877")),u=Object(l["a"])(c,s,o,!1,null,null,null),d=u.exports,m={name:"editOrder",data:function(){return{orderData:{},orderMovieList:[]}},components:{editOrderMovies:d},created:function(){var t=this;console.log(1),this.$axios.get("https://vueshopcart.herokuapp.com/orderlist/".concat(this.$route.params.orderID)).then((function(e){console.log("已取得",e),t.orderData=e.data,t.orderMovieList=e.data.movie})).catcg((function(t){console.log(t)}))},methods:{deleteHanlder:function(t){this.orderMovieList.splice(t,1)},changeAmountHandler:function(t){console.log("emit obj =",t);var e=this.orderMovieList[t.index];e.Quantity=t.Quantity,e.totalPrice=t.totalPrice},editUpdate:function(){var t=this,e=document.querySelector("#name").value,a=document.querySelector("#email").value,i=document.querySelector("#phone").value;this.orderData.name=e,this.orderData.email=a,this.orderData.phone=i,this.$axios.patch("https://vueshopcart.herokuapp.com/orderlist/".concat(this.$route.params.orderID),this.orderData).then((function(e){console.log(e),t.$router.push("/admin/orderList")})).catcg((function(t){console.log(t)}))},goToBack:function(){this.$router.push("/admin/orderList")}},computed:{getTotalPrice:function(){return this.orderMovieList.map((function(t){return t.totalPrice})).reduce((function(t,e){return t+e}),0)}},watch:{getTotalPrice:function(){console.log("totalpirce已改變"),this.orderData.totalPrice=this.getTotalPrice}}},p=m,f=(a("8602"),Object(l["a"])(p,i,r,!1,null,"84ecda98",null));e["default"]=f.exports},2019:function(t,e,a){},"2f17":function(t,e,a){"use strict";var i=a("2019"),r=a.n(i);r.a},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var i=a("1d80"),r=a("5899"),s="["+r+"]",o=RegExp("^"+s+s+"*"),n=RegExp(s+s+"*$"),c=function(t){return function(e){var a=String(i(e));return 1&t&&(a=a.replace(o,"")),2&t&&(a=a.replace(n,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,a){var i=a("861d"),r=a("d2bb");t.exports=function(t,e,a){var s,o;return r&&"function"==typeof(s=e.constructor)&&s!==a&&i(o=s.prototype)&&o!==a.prototype&&r(t,o),t}},"7e37":function(t,e,a){},8602:function(t,e,a){"use strict";var i=a("7e37"),r=a.n(i);r.a},a9e3:function(t,e,a){"use strict";var i=a("83ab"),r=a("da84"),s=a("94ca"),o=a("6eeb"),n=a("5135"),c=a("c6b6"),l=a("7156"),u=a("c04e"),d=a("d039"),m=a("7c73"),p=a("241c").f,f=a("06cf").f,v=a("9bf2").f,h=a("58a8").trim,b="Number",g=r[b],y=g.prototype,C=c(m(y))==b,_=function(t){var e,a,i,r,s,o,n,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=h(l),e=l.charCodeAt(0),43===e||45===e){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+l}for(s=l.slice(2),o=s.length,n=0;n<o;n++)if(c=s.charCodeAt(n),c<48||c>r)return NaN;return parseInt(s,i)}return+l};if(s(b,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var I,E=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof E&&(C?d((function(){y.valueOf.call(a)})):c(a)!=b)?l(new g(_(e)),a,E):_(e)},N=i?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;N.length>x;x++)n(g,I=N[x])&&!n(E,I)&&v(E,I,f(g,I));E.prototype=y,y.constructor=E,o(r,b,E)}},d81d:function(t,e,a){"use strict";var i=a("23e7"),r=a("b727").map,s=a("1dde"),o=a("ae40"),n=s("map"),c=o("map");i({target:"Array",proto:!0,forced:!n||!c},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-526df199.fc6f7cc9.js.map